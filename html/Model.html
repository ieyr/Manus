<html>
<head>
  <title>Dexto</title>
  <!-- Bootstrap Core CSS -->
  <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css">
  <link href="../style/material-fullpalette.min.css" rel="stylesheet">
  <link href="../style/ripples.min.css" rel="stylesheet">

  <!-- Plugin CSS -->
  <link rel="stylesheet" href="../css/animate.min.css" type="text/css">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="../css/model.css" type="text/css">

</head>
<body>
  <nav class="navbar navbar-material-grey-50">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <a class="navbar-brand" href="#">Dexto</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="../index.html">Home</a></li>
          <li><a href="Model.html">3D View</a></li>
          <li><a href="Room.html">Room</a></li>
          <li><a href="Docs.html">Documentation</a></li>
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>
  <div class="modal fade" id="startModal" tabindex="-1" role="dialog" aria-labelledby="startModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">

          <h4 class="modal-title" id="startModalLabel">Calibration</h4>
        </div>
        <div class="modal-body">
          <div class="alert alert-info shadow-z-1" role="alert">
            <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            In order to use the 3D Viewer you need to calibrate your Myo.
          </div>
          <div id="myo-connect" class="alert alert-danger shadow-z-1" role="alert">
            <span id="myo-connect-icon" class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            <span class="myo-connect-desc">Make sure to connect your Myo</span>
          </div>
          <center><img src="../img/myo.png"></center>
          <div class="modal-footer">
            <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
            <a id="cancel" href="../index.html" type="button" class="btn btn-primart">Cancel</a>
            <button id ="startCalib" type="button" class="btn btn-material-blue">Start Calibration</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="calibModal" tabindex="-1" role="dialog" aria-labelledby="calibModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">

          <h4 class="modal-title" id="calibModalLabel">Calibration</h4>
        </div>
        <div class="modal-body">
          <h5 id="progTxt">Calibration Progress</h5>
          <div id="totalProg" class="progress">
            <div id= "progress"class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0"aria-valuemax="100" style="width: 0%;">
              <span class="sr-only">0% Complete</span>
            </div>
          </div>
          <div class="alert alert-info shadow-z-1" role="alert">
            <span id="calibText">Make your hand flat and raise it above any surfaces then wait a few seconds</span>
          </div>
          <div id="myo-connect-calib" class="alert alert-danger shadow-z-1" role="alert">
            <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
            <span class="sr-only">Error:</span>
            Make sure to connect your Myo
          </div>
        </div>
        <div class="modal-footer">
          <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
          <h4 id="timeLeft"></h4>
          <a id="cancel" href="../index.html" type="button" class="btn btn-primart">Cancel</a>
          <button id ="NextCalib" type="button" class="btn btn-primary">Calibrate</button>
        </div>
      </div>
    </div>
  </div>
  <div id="container"></div>



  <script>
  var calibration = []
  var index = 0
  window.setup = false


  // Handles an event from the Modal
  function handleRecord(){
    if(recording) {
      window.setup = false
      recording = false
      for(var i = 0; i < 8; i++){

        var histArray = $.map(history, function(value, index) {
          return [value];
        });
        for(key in history){
          histArray.push(history[key])
        }
        var narray = []
        for(var j = 0; j < histArray.length-7; j++){
          try{
            narray.push(histArray[j][i]);
          }catch(e){
            console.error("Myo is not connected.");
            myoIsConnected = false;
          }
        }
        console.log(narray)
        console.log('standard deviation for port ' + i + ' on index ' + index + ': '+ rectifyAndAverage(narray))
        aggregateArray[index].push(rectifyAndAverage(narray))
      }

      history = [[]]
      historyIndex = 0
      if(index!=8){
      }
    } else {
      window.setup = true
      history = [[]]
      historyIndex = 0
      recording = true
    }
  }
  </script>

  <!-- CDNs -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="https://cdn.firebase.com/js/client/2.2.7/firebase.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
  <!-- ModelJs -->
  <script src="../script/Model.js"></script>
  <!-- Imported scripts -->
  <script type="text/javascript" src='../script/myo.js'></script>
  <script type="text/javascript" src='../script/emg-handler.js'></script>
  <script type="text/javascript" src='../script/classify-handler.js'></script>
  <script type="text/javascript" src='../script/livedata.js'></script>
  <script type="text/javascript" src='../script/util.js'></script>
  <script type="text/javascript" src='../script/position.js'></script>
  <!-- ThreeJs libraries -->
  <script src="../lib/three.min.js"></script>
  <script src="../lib/ColladaLoader.js"></script>
  <script src="../lib/OrbitControls.js"></script>
  <script src="../lib/Detector.js"></script>
  <script src="../lib/Projector.js"></script>
  <script src="../lib/CanvasRenderer.js"></script>
  <script src="../script/main.js"></script>

  <!-- Material Design for Bootstrap -->
  <script src="../js/material.min.js"></script>
  <script src="../js/ripples.min.js"></script>
  <script>
  $.material.init();
  </script>


</body>
</html>
